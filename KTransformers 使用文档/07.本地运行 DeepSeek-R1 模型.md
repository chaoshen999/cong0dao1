# æœ¬åœ°è¿è¡Œ DeepSeek-R1 æ¨¡å‹

## ç®€ä»‹

KTransformers æä¾›äº†ä¸€ä¸ªç”¨äºæœ¬åœ°æµ‹è¯•çš„ Python å‘½ä»¤è¡Œè„šæœ¬ã€‚

æœ¬ç« èŠ‚å†…å®¹é€‚ç”¨äºâ€œv0.2.3â€ç‰ˆæœ¬ã€‚ä»â€œv0.2.4â€ç‰ˆæœ¬å¼€å§‹ï¼Œéƒ¨åˆ†å‚æ•°æœ‰æ‰€è°ƒæ•´ï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒåé¢çš„ç« èŠ‚ã€‚

## ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ

1. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼š
```
conda activate ktransformers
```

## ä¸‹è½½æ¨¡å‹æ–‡ä»¶

å‚è€ƒå‰é¢çš„ç« èŠ‚ã€‚

## å¤åˆ¶ä¼˜åŒ–è§„åˆ™æ–‡ä»¶

1. å¤åˆ¶ä¼˜åŒ–è§„åˆ™æ–‡ä»¶ï¼š
```
mkdir -p /app/data/ktransformers/optimize_rules

cp \
    /app/ktransformers/ktransformers/optimize/optimize_rules/DeepSeek-V3-Chat.yaml \
    /app/data/ktransformers/optimize_rules/DeepSeek-R1-Chat.yaml
```

## æœ¬åœ°è¿è¡Œ

1. æœ¬åœ°è¿è¡Œæ¨¡å‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```
python -m ktransformers.local_chat \
    --model_path /app/data/model/DeepSeek-R1-GGUF \
    --gguf_path /app/data/model/DeepSeek-R1-GGUF/DeepSeek-R1-Q4_K_M \
    --optimize_config_path /app/data/ktransformers/optimize_rules/DeepSeek-R1-Chat.yaml
```

ç­‰å¾…å‡ åˆ†é’Ÿåï¼Œå‡ºç°å†…å®¹ï¼š
```
Chat: 
```

2. è¾“å…¥é—®é¢˜ï¼š
```
ä½ å¥½
```

ç­‰å¾…å‡ ç§’é’Ÿåï¼Œå‡ºç°å†…å®¹ï¼š
```
ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿæ— è®ºæ˜¯é—®é¢˜ã€å»ºè®®è¿˜æ˜¯é—²èŠï¼Œæˆ‘éƒ½åœ¨è¿™å„¿ä¸ºä½ æœåŠ¡ã€‚ğŸ˜Š
</think>

ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿæ— è®ºæ˜¯é—®é¢˜ã€å»ºè®®è¿˜æ˜¯é—²èŠï¼Œæˆ‘éƒ½åœ¨è¿™å„¿ä¸ºä½ æœåŠ¡ã€‚ğŸ˜Š
prompt eval count:    6 token(s)
prompt eval duration: 1.1980082988739014s
prompt eval rate:     5.008312551457159 tokens/s
eval count:           56 token(s)
eval duration:        10.140010833740234s
eval rate:            5.522676545242299 tokens/s
```

